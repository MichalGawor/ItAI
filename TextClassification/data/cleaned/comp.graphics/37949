b'' b'how do you go about orienting all normals in the same direction, given a' b'set of points, edges and faces?' b'' b'this algorithm works well for me:' b'' b'algorithm to attempt to find outward-facing normals:' b'---------------------------------------------------' b'first, mark all faces as unknown.' b'' b'then create an edge dictionary that allows you to find all of the' b'faces sharing a given edge (where an edge is two integers representing' b'the two shared vertices).' b'' b'pick an arbitrary face and mark it counter_clockwise. using the edge' b'dictionary, orient all surrounding faces based on the orientation of' b'this face. and recurse for all surrounding faces, consistently' b'orienting the entire surface.' b'' b'find the average of the vertices in this surface. using that point,' b"calculate a volume measurement, taking into account the face's" b'orientation. if the volume turns out to be positive, assume the faces' b'are oriented correctly. if it is negative, reverse their orientations' b'(mark them clockwise).' b'' b'if any faces are still unknown after this, choose another face' b'and go through the algorithm again.' b'' b'at the end, faces marked clockwise must have their indices reversed' b'before facet normals are found.' b'' b'(note: if you are running on silicon graphics machines and buy the' b'iris inventor 3d toolkit developers package you have the source to' b"this algorithm-- see /usr/src/inventor/tools/ivnorm/. if you're" b"not... sorry, i can't give out the source, and even if i could it" b'relies heavily on inventor).' b'--' 