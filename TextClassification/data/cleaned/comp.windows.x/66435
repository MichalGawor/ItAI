b'' b'' b'try this:' b'-------------------------------------------------------------------------------' b'#include <stdio.h' b'#include <x11/xlib.h' b'#include <x11/xutil.h' b'' b'display *dpy;' b'int\tscreen;' b'xcolor\t*xclrs,*xclrp;' b'xid\tcmap;' b'int\tcells,i,j,red,green,blue,got;' b'' b'' b'' b'main()' b'{' b'dpy xopendisplay(null);' b'screen defaultscreen(dpy);' b'cells displaycells(dpy,screen);' b'' b'cmap xcreatecolormap(dpy,rootwindow(dpy,screen),defaultvisual(dpy,screen),1);' b'' b'xclrs (xcolor *)malloc(cells sizeof(*xclrs));' b'' b'' b'xclrp xclrs;' b'for (i=0; i<cells; i++) xclrp-pixel i; xclrp-flags xclrp++; b'' b'xquerycolors(dpy,defaultcolormap(dpy,screen),xclrs,cells);' b'xstorecolors(dpy,cmap,xclrs,cells);' b'xinstallcolormap(dpy,cmap);' b'got b'' b'while(got) b'xclrp xclrs;' b'got b'for(i=0; i<cells; i++) b'if(xclrp-red {xclrp-red got b'if(xclrp-green {xclrp-green got=1;};' b'if(xclrp-blue {xclrp-blue got=1;};' b'xclrp b'}' b'xstorecolors(dpy,cmap,xclrs,cells);' b'/* xinstallcolormap(dpy,cmap); b'}' b'got b'while(got) b'xclrp xclrs;' b'got b'for(i=0; i<cells; i++) b'if(xclrp-red {xclrp-red got b'if(xclrp-green {xclrp-green got=1;};' b'if(xclrp-blue {xclrp-blue got=1;};' b'xclrp b'}' b'xstorecolors(dpy,cmap,xclrs,cells);' b'/* xinstallcolormap(dpy,cmap); b'}' b'}' b'--------------------------------------------------------------------------' b'it will work on any pseudocolor xserver. (hopefully b'' b'--' b'+-o-+--------------------------------------------------------------+-o-+' b'| o brain inside o b'| o o b'+-o-+--------------------------------------------------------------+-o-+' 