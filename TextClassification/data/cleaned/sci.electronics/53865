b'' b"i am trying to build a synchronous demodulator and i've hit a snag." b'in my application i want to be able to change the gain of an' b'op amp amplifier from to controlable via a digital input.' b"the most obvious way i've come up with is to use analog switches" b'to adjust the gain of the op amp. the only analog switch i have' b'experience with it the unfortunately i want to switch an' b'ac signal which goes from about -5v to 5v, and the is only' b'for positive signals.' b'[...]' b' i have a carrier signal which varies between 0v and +5v. i want' b'to demodulate an input signal by feeding the input signal thru a' b'amp with a gain of when the carrier is at +5v, and thru a amp' b'with a gain of when the carrier is 0v. the output is then' b'low pass filtered. i believe this is called lock in detection as well' b'as synchronous demodulation.' b'' b'look at the this is a triple 2-to-1 transmission-gate analog' b'multiplexer, with positive and negative power supplies (can be run' b'from a single-ended supply as well). with dual supplies, the logic' b'inputs still range from ground volts) to vdd.' b'' b'this is a neat (well, i think so) design for a switchable-polarity' b'amplifier:' b'' b'+-----/\\/\\/\\-------+' b'| b'| b'input b'| opamp output' b'+-/\\/\\/\\--+----| b'| b'|' b'control\t---------x (analog switch)' b'|' b'|' b'---' b'gnd' b'' b'all resistors are equal-value. when the analog switch is closed,' b'the amp is inverting-gain-of-one. with the switch open, it is' b'non-inverting-gain-of-one. you can clean up the circuit to trim' b'out input offset current if this hurts the balance (this would show' b'up as carrier feed-through).' b'' b'for high frequencies, the slew-rate of the opamp might cause problems,' b"especially if it isn't symmetrical (and it usually isn't)." b'' b'--' b'-------- paul elliott dsc optilink petaluma, ca usa b'"i used to think i was indecisive, but now i\'m not so sure."' b'' 