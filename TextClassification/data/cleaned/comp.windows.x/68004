b'' b'as distributed, twm thinks everything with three or more colormap cells must' b"be a colour screen. here's a patch to have it use the screen's visual class." b'' b'*** twm.c.dist\twed may b'--- twm.c\twed may b'***************' b'*** b'--- b'' b'scr-xorvalue (((unsigned long) scr-d_depth) b'' b'+ #ifdef oldcode' b'if (displaycells(dpy, scrnum) b'scr-monochrome monochrome;' b'else' b'scr-monochrome color;' b'+ #else' b'+ \t{\txvisualinfo template;' b'+ \t\txvisualinfo *visualinfo;' b'+ \t\tint nitems;' b'+' b'+ \t\ttemplate.visual defaultvisual(dpy, scrnum);' b'+ \t\ttemplate.visualid xvisualidfromvisual(template.visual);' b'+ \t\ttemplate.screen scrnum;' b'+ \t\tvisualinfo xgetvisualinfo(dpy, visualidmask|visualscreenmask,' b'+ \t\t\t\t&template, &nitems);' b'+ \t\tif (nitems b'+ \t\t\tswitch (visualinfo-class) b'+ \t\tcase staticcolor:' b'+ \t\tcase pseudocolor:' b'+ \t\tcase truecolor:' b'+ \t\tcase directcolor:' b'+ \t\t\t\tscr-monochrome color;' b'+ \t\t\t\tbreak;' b'+' b'+ \t\tdefault:\tscr-monochrome monochrome;' b'+ \t\t\t\tbreak;' b'+ \t\t\t}' b'+ \t\t}' b'+ \t\telse b'+ \t\t\t(void) fprintf(stderr,' b'+ \t\t\t\t\t"%d visual match(es), assuming mono\\n",' b'+ \t\t\t\t\tnitems);' b'+ \t\t\tscr-monochrome monochrome; assume b'+ \t\t}' b'+ \t}' b'+ #endif' b'' b'/* setup default colors b'scr-firsttime true;' b'' b'--' b'george d m ross, department of computer science, university of edinburgh' b'kings buildings, mayfield road, edinburgh, scotland, eh9 3jz' 