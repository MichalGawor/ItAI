b'' b'i just got a bug report and a fix for this exact problem from' b'' b' the most serious problem i have identified has not' b" been incorporated. this problem occurs when the table widget's" b' geometrymanager is invoked by a child. this will work correctly if' b' the table widgets parent complies with the xt protocols. however, if' b' they do not, as is the case for some motif widgets, and they ignore' b' xtcwqueryonly, then the sizing will be incorrect.' b' in order to see this problem, the following events must' b' happen:' b' a child of the table widget must request a new size.' b' the table widget must query its parent for a new size having set' b' xtcwqueryonly.' b' the parent must ignore the xtcwqueryonly bit and resize the table' b' widget. as part of the resize, xmptableforgetproposedlayout is' b' called. this will set tw-table.current_cols and' b' tw-table.current_rows to zero.' b' the table will continue setting up the new size, working under the' b' assumption that it is working with a proposed and not actual' b' layout. at the end, it will call xmptablesaveproposedlayout. this' b' will save tw-table.cols and tw-table.rows and restore their' b' values from tw-table.current_cols and tw-table.current_rows.' b' however, these have already been set to zero.' b' since the table widget has already been resized, it will not need a' b' second resize.' b' next, another widget managed by some ancestor of the table is' b' resized. this results in the parent of the table requesting the' b' tables preferred size. since tw-table.cols and tw-table.rows are' b' zero, this will return 0x0 as the preferred size.' b' the parent is very likely to grant this request, resulting in a' b' loss of the whole table from the display.' b'' b'' b'he isolated the problem a proposed a workaround which seems precisely' b'correct. here is the new implementation of xmptablenewproposedlayout' b'which will be released with the next update in weeks:' b'' b'xmp/table.c:' b'' b'void xmptablenewproposedlayout( tw b'xmptablewidget tw;' b'{' b'xmptableconsidersamesize( tw b'xmptableproposedcolsandrows( tw b'xmptablequeryparentforresize( tw query only, no resize b'' b'/*' b'* since we only made a query, we *should* still need to continue.' b'* however, motif is broken so that we actually may already have' b'* been resized. in that case, the proposed layout is already' b'* forgotten, so we should just quietly exit.' b'*/' b'if tw-table.resize_status rsduetorequest b'{' b'xmptablemakecolsfitquerywidth( tw b'xmptablemakerowsfitqueryheight( tw b'xmptablegetproposedchildsize( tw b'xmptablesaveproposedlayout( tw b'}' b'/* else the resize has already been done. our proposed layout would' b'* have been forgotten in the process.' b'*/' b'}' b'' b'the xptable the fix is identical, except of course for the names:' b'' b'xp/table.c:' b'' b'void xptablenewproposedlayout( tw b'xptablewidget tw;' b'{' b'xptableconsidersamesize( tw b'xptableproposedcolsandrows( tw b'xptablequeryparentforresize( tw query only, no resize b'/*' b'* since we only made a query, we *should* still need to continue.' b'* however, some manager widgets are broken so that we actually may' b'* already have been resized. in that case, the proposed layout' b'* is already forgotten, so we should just quietly exit.' b'*/' b'if tw-table.resize_status rsduetorequest b'{' b'xptablemakecolsfitquerywidth( tw b'xptablemakerowsfitqueryheight( tw b'xptablegetproposedchildsize( tw b'xptablesaveproposedlayout( tw b'}' b'/* else the resize has already been done. our proposed layout would' b'* have been forgotten in the process.' b'*/' b'}' b'' b'-------------------------------------------------------------------------' b'senior software engineer,\t\t(818)306-6193 (do not use v-mail yet!)' b'cccp, x and object guru.\t\toffice: 525/c165' b'jet propulsion lab, m/s oak grove drive, pasadena, ca b'-------------------------------------------------------------------------' b'"that sun windows thingy, what\'s it called? you know, its' b'really awful. x? motif? that\'s it motif! yuck!"' b'-------------------------------------------------------------------------' 